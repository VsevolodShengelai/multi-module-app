## Введение

Java-приложение состоит из трех модулей:

-   **api-gateway**: API-шлюз, перенаправляющий запросы на сервисы `service-a` и `service-b`.
-   **service-a**: Сервис, возвращающий сообщение "Hello from Service A" и информацию о реплике.
-   **service-b**: Сервис, возвращающий сообщение "Hello from Service B" и информацию о реплике.

Приложение разработано с использованием **Spring Boot** и развернуто в **Kubernetes** с использованием **Docker** для контейнеризации. Оно демонстрирует базовые принципы микросервисной архитектуры, включая балансировку нагрузки и масштабирование.


## Архитектура приложения

### Обзор модулей

-   **api-gateway**: Центральная точка входа для всех внешних запросов. Он принимает HTTP-запросы и маршрутизирует их на соответствующие внутренние сервисы.
-   **service-a** и **service-b**: Микросервисы, обрабатывающие бизнес-логику и возвращающие простые сообщения.

### Взаимодействие модулей

1.  **Клиент** отправляет HTTP-запросы к `api-gateway`.
2.  **api-gateway** анализирует путь запроса и перенаправляет его на `service-a` или `service-b` в зависимости от префикса (`/service-a` или `/service-b`).
3.  **service-a** или **service-b** обрабатывает запрос и возвращает ответ, включая имя реплики (пода), обработавшей запрос.
4.  **api-gateway** возвращает ответ клиенту.


## Описание модулей


### 1. api-gateway

#### Функциональность

-   Принимает все входящие HTTP-запросы.
-   Маршрутизирует запросы на `service-a` и `service-b` на основе пути запроса.
-   Обрабатывает все HTTP-методы (GET, POST, PUT, DELETE и т.д.).

#### Конфигурация

-   **Порт**: 8080
-   **Переменные окружения**:
    -   `SERVICE_A_URL`: URL для доступа к `service-a`.
    -   `SERVICE_B_URL`: URL для доступа к `service-b`.

### 2. service-a

#### Функциональность

-   Возвращает сообщение "Hello from Service A".
-   Указывает имя пода (реплики), обработавшего запрос.

#### Конфигурация

-   **Порт**: 8081
-   **Переменные окружения**:
    -   `POD_NAME`: Имя пода, полученное из Kubernetes через Downward API.

### 3. service-b

#### Функциональность

-   Возвращает сообщение "Hello from Service B".
-   Указывает имя пода (реплики), обработавшего запрос.

#### Конфигурация

-   **Порт**: 8082
-   **Переменные окружения**:
    -   `POD_NAME`: Имя пода, полученное из Kubernetes через Downward API.

## Сборка и упаковка
### Maven-проект
Проект организован как многомодульный Maven-проект со следующей структурой (директории и файлы, касающиеся деплоя здесь не отображены):
```bash
multi-module-app/
├── pom.xml (родительский POM)
├── api-gateway/
│   ├── pom.xml
│   └── src/
├── service-a/
│   ├── pom.xml
│   └── src/
└── service-b/
    ├── pom.xml
    └── src/
```

-   **Родительский POM**: Управляет версиями зависимостей и плагинов, а также определяет модули.
-   **Модули**: Каждый сервис является отдельным модулем со своим `pom.xml`, наследующим от родительского.


### Docker-контейнеризация

Для каждого модуля создан **Dockerfile**, описывающий процесс сборки Docker-образа.

Пример Dockerfile для service-a:

```
FROM openjdk``:``17-jdk-slim
WORKDIR /app
COPY target/service-a-1.0-SNAPSHOT.jar service-a.jar
EXPOSE <PortNumber>
ENTRYPOINT` `[``"java"``,` `"-jar"``,` `"service-a.jar"``]
```
